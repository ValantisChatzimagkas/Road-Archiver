{"openapi":"3.1.0","info":{"title":"Road Network Management API","description":"REST API for managing road networks, uploading, updating and retrieving road networks","version":"1.0.0"},"paths":{"/users/":{"post":{"tags":["users"],"summary":"Create a new user","description":"Creates a user with the provided details.","operationId":"create_user_users__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUser"},"example":{"username":"my_user","email":"my_user@coldmail.com","hashed_password":"A_sword","role":"USER"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadUser"}}}},"201":{"description":"User successfully created"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{id}":{"get":{"tags":["users"],"summary":"Get user by id","description":"This endpoint has 2 modes.\n             <br>\n             <ul>\n                <li> if user is **Admin** then that user can get every user. </li>\n                <li> if user is **User** then this user can retrieve only itself.</li>\n             </ul>\n             \n             - Requires authentication.","operationId":"get_user_users__id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"responses":{"200":{"description":"Found User","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadUser"}}}},"401":{"description":"Not Allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["users"],"summary":"Deletes a user","description":"Delete a user, in order to user this endpoint, the caller must be an Admin.\n               \n               - Requires authentication.","operationId":"delete_user_endpoint_users__id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"responses":{"200":{"description":"User was deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"401":{"description":"Not Allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{id}/networks":{"get":{"tags":["users"],"summary":"Get road networks for user","description":"This endpoint will retrieve all the road networks that are associated to a user.\n\n             - Requires authentication.","operationId":"get_road_networks_for_user_users__id__networks_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"responses":{"200":{"description":"Found Networks","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReadRoadNetwork"},"title":"Response Get Road Networks For User Users  Id  Networks Get"}}}},"401":{"description":"Not Allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["authentication"],"summary":"Login endpoint for user login","description":"Performs login action and provides access token JWT","operationId":"login_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Login successful, JWT token returned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"401":{"description":"Invalid username or password"},"422":{"description":"Validation error (e.g., missing fields)"}}}},"/networks/upload":{"post":{"tags":["Networks"],"summary":"Upload a new road network file","description":"Uploads a road network file, in geojson format.\n\n             - Requires authentication.\n             - The file must be valid and properly formatted.","operationId":"upload_road_network_networks_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_road_network_networks_upload_post"}}},"required":true},"responses":{"201":{"description":"File uploaded successfully","content":{"application/json":{"schema":{}}}},"400":{"description":"Invalid file format or upload error"},"401":{"description":"Unauthorized"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/networks/{network_id}/edges":{"get":{"tags":["Networks"],"summary":"Retrieve road network edges","description":"Returns the edges of a specific road network by ID.\n\n            - Optionally filter by timestamp (to get the network state at a given time).\n            - Requires authentication.","operationId":"get_network_networks__network_id__edges_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"network_id","in":"path","required":true,"schema":{"type":"integer","title":"Network Id"}},{"name":"timestamp","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp"}}],"responses":{"200":{"description":"Edges retrieved successfully","content":{"application/json":{"schema":{}}}},"404":{"description":"Road network not found"},"401":{"description":"Unauthorized"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/networks/{network_id}/update":{"post":{"tags":["Networks"],"summary":"Update a road network from a file","description":"Updates the given road network using a new uploaded file.\n\n             - Requires authentication.\n             - The file content must be valid.","operationId":"update_network_from_file_networks__network_id__update_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"network_id","in":"path","required":true,"schema":{"type":"integer","title":"Network Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_update_network_from_file_networks__network_id__update_post"}}}},"responses":{"200":{"description":"Network updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NetworkUpdateResponse"}}}},"400":{"description":"Invalid file or update failed"},"404":{"description":"Road network not found"},"401":{"description":"Unauthorized"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"Homepage.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/health":{"get":{"tags":["Health"],"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Health Check Health Get"}}}}}}}},"components":{"schemas":{"Body_login_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_auth_login_post"},"Body_update_network_from_file_networks__network_id__update_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_update_network_from_file_networks__network_id__update_post"},"Body_upload_road_network_networks_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_road_network_networks_upload_post"},"CreateUser":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","format":"email","title":"Email"},"hashed_password":{"type":"string","title":"Hashed Password"},"role":{"$ref":"#/components/schemas/UserRolesOptions"}},"type":"object","required":["username","email","hashed_password","role"],"title":"CreateUser"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MessageResponse":{"properties":{"detail":{"type":"string","title":"Detail"}},"type":"object","required":["detail"],"title":"MessageResponse"},"NetworkUpdateResponse":{"properties":{"message":{"type":"string","title":"Message"},"network_id":{"type":"integer","title":"Network Id"}},"type":"object","required":["message","network_id"],"title":"NetworkUpdateResponse"},"ReadRoadNetwork":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["id","name"],"title":"ReadRoadNetwork"},"ReadUser":{"properties":{"id":{"type":"integer","title":"Id"},"username":{"type":"string","title":"Username"},"email":{"type":"string","format":"email","title":"Email"},"role":{"$ref":"#/components/schemas/UserRolesOptions"}},"type":"object","required":["id","username","email","role"],"title":"ReadUser"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"UserRolesOptions":{"type":"string","enum":["ADMIN","MODERATOR","USER","GUEST"],"title":"UserRolesOptions","description":"ADMIN:      Full control: manage users, system settings, content, etc\nMODERATOR: Limited admin: review/manage content or users (but not system settings)\nUSER: Regular authenticated user\nGUEST: Unauthenticated or very limited account"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"auth/login"}}}}},"tags":[{"name":"users","description":"Operations related to users"},{"name":"authentication","description":"Login and security"},{"name":"Networks","description":"Manage road network data"}]}